"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3713],{3713:(st,A,r)=>{r.r(A),r.d(A,{FileManagerModule:()=>Z});var c=r(1390),l=r(4859),y=r(7392),h=r(3267),k=r(266),M=r(4466),t=r(4650);class g{canDeactivate(n,e,o,a){let _=a.root;for(;_.firstChild;)_=_.firstChild;return!(a.url.includes("/file-manager")&&!a.url.includes("/details"))||n.closeDrawer().then(()=>!0)}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}class x{constructor(){}static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275cmp=t.Xpm({type:x,selectors:[["file-manager"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2,changeDetection:0})}var F=r(7579),v=r(2722),C=r(1135),w=r(8505),q=r(5698),J=r(4004),L=r(3900),T=r(2843),B=r(9646),D=r(529);class s{constructor(n){this._httpClient=n,this._item=new C.X(null),this._items=new C.X(null)}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}getItems(n=null){return this._httpClient.get("api/apps/file-manager",{params:{folderId:n}}).pipe((0,w.b)(e=>{this._items.next(e)}))}getItemById(n){return this._items.pipe((0,q.q)(1),(0,J.U)(e=>{const o=[...e.folders,...e.files].find(a=>a.id===n)||null;return this._item.next(o),o}),(0,L.w)(e=>e?(0,B.of)(e):(0,T._)("Could not found the item with id of "+n+"!")))}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(D.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}var Y=r(4880),b=r(6895);const O=["matDrawer"];function N(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",e.items.folders.length," folders, ",e.items.files.length," files ")}}const Q=function(i){return["/apps/file-manager/folders/",i]};function j(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"a",17),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,Q,e.id)),t.xp6(1),t.Oqu(e.name)}}function S(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.name)}}function z(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",18),t._uU(2,"/"),t.qZA(),t.BQk())}function R(i,n){if(1&i&&(t.ynx(0),t.YNc(1,j,3,4,"ng-container",9),t.YNc(2,S,3,1,"ng-container",9),t.YNc(3,z,3,0,"ng-container",9),t.BQk()),2&i){const e=n.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!e)}}const $=function(){return["/apps/file-manager"]};function G(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",16)(2,"a",17),t._uU(3,"Home "),t.qZA(),t.TgZ(4,"div",18),t._uU(5,"/"),t.qZA(),t.YNc(6,R,4,3,"ng-container",19),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.DdM(3,$)),t.xp6(4),t.Q6J("ngForOf",e.items.path)("ngForTrackBy",e.trackByFn)}}function X(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",32),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.contents)}}const U=function(i){return["./details/",i]};function K(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",23)(2,"a",24),t.NdJ("click",function(o){return o.preventDefault()}),t._UZ(3,"mat-icon",25),t.qZA(),t.TgZ(4,"a",26)(5,"div",27)(6,"div",28),t._UZ(7,"mat-icon",29),t.qZA()(),t.TgZ(8,"div",30)(9,"div",31),t._uU(10),t.qZA(),t.YNc(11,X,3,1,"ng-container",9),t.qZA()()(),t.BQk()),2&i){const e=n.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(7,U,e.id)),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:information-circle"),t.xp6(1),t.Q6J("routerLink",t.VKq(9,Q,e.id)),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:folder"),t.xp6(2),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.contents)}}function H(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div")(2,"div",21),t._uU(3,"Folders"),t.qZA(),t.TgZ(4,"div",22),t.YNc(5,K,12,11,"ng-container",19),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.items.folders)("ngForTrackBy",e.trackByFn)}}function W(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",32),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.contents)}}function E(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"a",33)(2,"div",27)(3,"div",28)(4,"div",34),t._UZ(5,"mat-icon",29),t.TgZ(6,"div",35),t._uU(7),t.qZA()()()(),t.TgZ(8,"div",30)(9,"div",31),t._uU(10),t.qZA(),t.YNc(11,W,3,1,"ng-container",9),t.qZA()(),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(16,U,e.id)),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:document"),t.xp6(1),t.ekj("bg-red-600","PDF"===e.type)("bg-blue-600","DOC"===e.type)("bg-green-600","XLS"===e.type)("bg-gray-600","TXT"===e.type)("bg-amber-600","JPG"===e.type),t.xp6(1),t.hij(" ",e.type.toUpperCase()," "),t.xp6(2),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.contents)}}function P(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div")(2,"div",21),t._uU(3,"Files"),t.qZA(),t.TgZ(4,"div",22),t.YNc(5,E,12,18,"ng-container",19),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.items.files)("ngForTrackBy",e.trackByFn)}}function V(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",20),t.YNc(2,H,6,2,"ng-container",9),t.YNc(3,P,6,2,"ng-container",9),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.items.folders.length>0),t.xp6(1),t.Q6J("ngIf",e.items.files.length>0)}}function tt(i,n){1&i&&(t.TgZ(0,"div",36),t._UZ(1,"mat-icon",37),t.TgZ(2,"div",38),t._uU(3,"There are no items!"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:folder-open"))}class m{constructor(n,e,o,a,_){this._activatedRoute=n,this._changeDetectorRef=e,this._router=o,this._fileManagerService=a,this._fuseMediaWatcherService=_,this._unsubscribeAll=new F.x}ngOnInit(){this._fileManagerService.items$.pipe((0,v.R)(this._unsubscribeAll)).subscribe(n=>{this.items=n,this._changeDetectorRef.markForCheck()}),this._fileManagerService.item$.pipe((0,v.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedItem=n,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,v.R)(this._unsubscribeAll)).subscribe(n=>{this.drawerMode=n.matches?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(n,e){return e.id||n}static#t=this.\u0275fac=function(e){return new(e||m)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(s),t.Y36(Y.T))};static#e=this.\u0275cmp=t.Xpm({type:m,selectors:[["file-manager-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(O,7),2&e){let a;t.iGM(a=t.CRH())&&(o.matDrawer=a.first)}},decls:22,vars:10,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-100","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","p-6","sm:py-12","md:px-8","border-b","bg-card","dark:bg-transparent"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"flex","items-center","mt-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"mt-4","sm:mt-0"],["mat-flat-button","",3,"color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf","ngIfElse"],["noItems",""],[1,"flex","items-center","space-x-2"],[1,"text-primary","cursor-pointer",3,"routerLink"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-6","md:p-8","space-y-8"],[1,"font-medium"],[1,"flex","flex-wrap","-m-2","mt-2"],[1,"relative","w-40","h-40","m-2","p-4","shadow","rounded-2xl","bg-card"],["mat-icon-button","",1,"absolute","z-20","top-1.5","right-1.5","w-8","h-8","min-h-8",3,"routerLink","click"],[1,"icon-size-5",3,"svgIcon"],[1,"z-10","absolute","inset-0","flex","flex-col","p-4","cursor-pointer",3,"routerLink"],[1,"aspect-[9/6]"],[1,"flex","items-center","justify-center","h-full"],[1,"icon-size-14","text-hint","opacity-50",3,"svgIcon"],[1,"flex","flex-col","flex-auto","justify-center","text-center","text-sm","font-medium"],[1,"truncate",3,"matTooltip"],[1,"text-secondary","truncate"],[1,"flex","flex-col","w-40","h-40","m-2","p-4","shadow","rounded-2xl","cursor-pointer","bg-card",3,"routerLink"],[1,"relative"],[1,"absolute","left-0","bottom-0","px-1.5","rounded","text-sm","font-semibold","leading-5","text-white"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return o.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t._uU(10,"File Manager"),t.qZA(),t.TgZ(11,"div",8),t.YNc(12,N,2,2,"ng-container",9),t.YNc(13,G,7,4,"ng-container",9),t.qZA()(),t.TgZ(14,"div",10)(15,"button",11),t._UZ(16,"mat-icon",12),t.TgZ(17,"span",13),t._uU(18,"Upload file"),t.qZA()()()(),t.YNc(19,V,4,2,"ng-container",14),t.YNc(20,tt,4,1,"ng-template",null,15,t.W1O),t.qZA()()()()),2&e){const a=t.MAs(21);t.xp6(2),t.Q6J("mode",o.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(10),t.Q6J("ngIf",!o.items.path.length),t.xp6(1),t.Q6J("ngIf",o.items.path.length),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(3),t.Q6J("ngIf",o.items&&(o.items.folders.length>0||o.items.files.length>0))("ngIfElse",a)}},dependencies:[c.lC,c.rH,l.lW,l.o6,y.Hw,h.jA,h.kh,h.LW,k.gM,b.sg,b.O5],encapsulation:2,changeDetection:0})}function et(i,n){1&i&&(t.ynx(0),t._UZ(1,"mat-icon",23),t.BQk()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:folder"))}function nt(i,n){1&i&&(t.ynx(0),t._UZ(1,"mat-icon",23),t.BQk()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:document"))}function it(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",12)(2,"div",13),t._uU(3,"Contents"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.item.contents)}}function ot(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.item.description)}}function rt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",24),t._uU(2,"Click here to add a description"),t.qZA(),t.BQk())}const at=function(){return["../../"]};class u{constructor(n,e,o){this._changeDetectorRef=n,this._fileManagerListComponent=e,this._fileManagerService=o,this._unsubscribeAll=new F.x}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this._fileManagerService.item$.pipe((0,v.R)(this._unsubscribeAll)).subscribe(n=>{this._fileManagerListComponent.matDrawer.open(),this.item=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(n,e){return e.id||n}static#t=this.\u0275fac=function(e){return new(e||u)(t.Y36(t.sBO),t.Y36(m),t.Y36(s))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["file-manager-details"]],decls:51,vars:28,consts:[[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"mt-8","aspect-[9/6]"],[1,"flex","items-center","justify-center","h-full","border","rounded-lg","bg-gray-50","dark:bg-card"],[4,"ngIf"],[1,"flex","flex-col","items-start","mt-8"],[1,"text-xl","font-medium"],[1,"mt-1","px-1.5","rounded","text-sm","font-semibold","leading-5","text-white"],[1,"text-lg","font-medium","mt-8"],[1,"flex","flex-col","mt-4","border-t","border-b","divide-y","font-medium"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"flex","items-center","justify-between","mt-8"],[1,"text-lg","font-medium"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","mt-2","border-t"],[1,"py-3"],[1,"grid","grid-cols-2","gap-4","w-full","mt-8"],["mat-flat-button","",1,"flex-auto",3,"color"],["mat-stroked-button","",1,"flex-auto"],[1,"icon-size-24","text-hint",3,"svgIcon"],[1,"italic","text-secondary"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"mat-icon",3),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5),t.YNc(6,et,2,1,"ng-container",6),t.YNc(7,nt,2,1,"ng-container",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",9),t._uU(12),t.qZA()(),t.TgZ(13,"div",10),t._uU(14,"Information"),t.qZA(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",13),t._uU(18,"Created By"),t.qZA(),t.TgZ(19,"div"),t._uU(20),t.qZA()(),t.TgZ(21,"div",12)(22,"div",13),t._uU(23,"Created At"),t.qZA(),t.TgZ(24,"div"),t._uU(25),t.qZA()(),t.TgZ(26,"div",12)(27,"div",13),t._uU(28,"Modified At"),t.qZA(),t.TgZ(29,"div"),t._uU(30),t.qZA()(),t.TgZ(31,"div",12)(32,"div",13),t._uU(33,"Size"),t.qZA(),t.TgZ(34,"div"),t._uU(35),t.qZA()(),t.YNc(36,it,6,1,"ng-container",6),t.qZA(),t.TgZ(37,"div",14)(38,"div",15),t._uU(39,"Description"),t.qZA(),t.TgZ(40,"button",16),t._UZ(41,"mat-icon",17),t.qZA()(),t.TgZ(42,"div",18)(43,"div",19),t.YNc(44,ot,3,1,"ng-container",6),t.YNc(45,rt,3,0,"ng-container",6),t.qZA()(),t.TgZ(46,"div",20)(47,"button",21),t._uU(48," Download "),t.qZA(),t.TgZ(49,"button",22),t._uU(50," Delete "),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(27,at)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(3),t.Q6J("ngIf","folder"===o.item.type),t.xp6(1),t.Q6J("ngIf","folder"!==o.item.type),t.xp6(3),t.Oqu(o.item.name),t.xp6(1),t.ekj("bg-indigo-600","folder"===o.item.type)("bg-red-600","PDF"===o.item.type)("bg-blue-600","DOC"===o.item.type)("bg-green-600","XLS"===o.item.type)("bg-gray-600","TXT"===o.item.type)("bg-amber-600","JPG"===o.item.type),t.xp6(1),t.hij(" ",o.item.type.toUpperCase()," "),t.xp6(8),t.Oqu(o.item.createdBy),t.xp6(5),t.Oqu(o.item.createdAt),t.xp6(5),t.Oqu(o.item.modifiedAt),t.xp6(5),t.Oqu(o.item.size),t.xp6(1),t.Q6J("ngIf",o.item.contents),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:pencil"),t.xp6(3),t.Q6J("ngIf",o.item.description),t.xp6(1),t.Q6J("ngIf",!o.item.description),t.xp6(2),t.Q6J("color","primary"))},dependencies:[c.rH,l.lW,l.o6,l.RK,y.Hw,b.O5],encapsulation:2,changeDetection:0})}var I=r(262);class d{constructor(n){this._fileManagerService=n}resolve(n,e){return this._fileManagerService.getItems()}static#t=this.\u0275fac=function(e){return new(e||d)(t.LFG(s))};static#e=this.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}class f{constructor(n,e){this._router=n,this._fileManagerService=e}resolve(n,e){return this._fileManagerService.getItems(n.paramMap.get("folderId")).pipe((0,I.K)(o=>{console.error(o);const a=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(a),(0,T._)(o)}))}static#t=this.\u0275fac=function(e){return new(e||f)(t.LFG(c.F0),t.LFG(s))};static#e=this.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}class p{constructor(n,e){this._router=n,this._fileManagerService=e}resolve(n,e){return this._fileManagerService.getItemById(n.paramMap.get("id")).pipe((0,I.K)(o=>{console.error(o);const a=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(a),(0,T._)(o)}))}static#t=this.\u0275fac=function(e){return new(e||p)(t.LFG(c.F0),t.LFG(s))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}const ct=[{path:"",component:x,children:[{path:"folders/:folderId",component:m,resolve:{item:f},children:[{path:"details/:id",component:u,resolve:{item:p},canDeactivate:[g]}]},{path:"",component:m,resolve:{items:d},children:[{path:"details/:id",component:u,resolve:{item:p},canDeactivate:[g]}]}]}];class Z{static#t=this.\u0275fac=function(e){return new(e||Z)};static#e=this.\u0275mod=t.oAB({type:Z});static#n=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(ct),l.ot,y.Ps,h.SJ,k.AV,M.m]})}}}]);