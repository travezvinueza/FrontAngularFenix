"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9994],{9994:(gt,v,a)=>{a.r(v),a.d(v,{CryptoModule:()=>f});var F=a(3162),A=a(1390),h=a(4859),J=a(811),g=a(9549),x=a(7392),T=a(284),Q=a(8255),D=a(4385),S=a(3267),p=a(6308),i=a(671),I=a(3848),U=a(6205),w=a(4466),Y=a(7579),s=a(4006),_=a(8288),t=a(4650),M=a(1135),B=a(8505),d=a(5597),R=a(529);class l{constructor(e){this._httpClient=e,this._data=new M.X(null)}get data$(){return this._data.asObservable()}getData(){return this._httpClient.get(d.d.API_PATH.concat("/v1/company")).pipe((0,B.b)(e=>{this._data.next(e)}))}createCompany(e){return this._httpClient.post(d.d.API_PATH+"/v1/company/create",e)}updateCompany(e,o){return this._httpClient.patch(d.d.API_PATH+"/v1/company/update/"+o,e)}deleteCompany(e){return this._httpClient.delete(d.d.API_PATH+"/v1/company/delete/"+e)}static#t=this.\u0275fac=function(o){return new(o||l)(t.LFG(R.eN))};static#e=this.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}var k=a(7915),b=a(6895),Z=a(4850),G=a(8214),N=a(266);const E=["registerCompanyNgForm"],H=["recentTransactionsTable"];function j(r,e){if(1&r&&(t.TgZ(0,"fuse-alert",38),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",o.alertService.alert.type)("@shake","error"===o.alertService.alert.type),t.xp6(1),t.hij(" ",o.alertService.alert.message," ")}}function L(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.createCompany())}),t._uU(1," Guardar "),t.qZA()}2&r&&t.Q6J("color","primary")}function V(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.updateCompany())}),t._uU(1," Actualizar "),t.qZA()}2&r&&t.Q6J("color","primary")}function P(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Nombre "),t.qZA())}function O(r,e){if(1&r&&(t.TgZ(0,"td",41)(1,"span",42),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.name," ")}}function $(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Nombre empresa "),t.qZA())}function q(r,e){if(1&r&&(t.TgZ(0,"td",41)(1,"span",42),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.commercialName," ")}}function z(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Ruc "),t.qZA())}function K(r,e){if(1&r&&(t.TgZ(0,"td",41)(1,"span",42),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.document," ")}}function X(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Telefono "),t.qZA())}function W(r,e){if(1&r&&(t.TgZ(0,"td",41)(1,"span",42),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.mobile," ")}}function tt(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Estado "),t.qZA())}const et=function(r,e){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":r,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":e}};function ot(r,e){if(1&r&&(t.TgZ(0,"td",41)(1,"span",43)(2,"span",44),t._uU(3),t.qZA()()()),2&r){const o=e.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,et,"REG"===o.status,"INA"===o.status)),t.xp6(2),t.Oqu(o.status)}}function rt(r,e){1&r&&(t.TgZ(0,"th",40),t._uU(1," Acciones "),t.qZA())}function at(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"td",41)(1,"div")(2,"button",45),t.NdJ("click",function(){const C=t.CHM(o).$implicit,y=t.oxw();return t.KtG(y.editCompany(C))}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA()(),t.TgZ(5,"button",46),t.NdJ("click",function(){const C=t.CHM(o).$implicit,y=t.oxw();return t.KtG(y.deleteCompany(C))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}}function nt(r,e){1&r&&t._UZ(0,"td",47)}function it(r,e){1&r&&t._UZ(0,"tr",48)}function st(r,e){1&r&&t._UZ(0,"tr",49)}function mt(r,e){1&r&&t._UZ(0,"tr",50)}const lt=function(){return["recentOrdersTableFooter"]};class u{constructor(e,o,n){this._cryptoService=e,this._formBuilder=o,this.alertService=n,this.recentTransactionsDataSource=new i.by,this.recentTransactionsTableColumns=["name","commercialName","document","mobile","status","actions"],this._unsubscribeAll=new Y.x,this.updateCompanyBtn=!1,this.idCompany=0}ngOnInit(){this.alertService.showAlert=!1,this.registerCompanyForm=this._formBuilder.group({name:["",s.kI.required],commercialName:["",[s.kI.required]],document:["",s.kI.required],phone:["",s.kI.required],mobile:["",s.kI.required],representativeName:["",s.kI.required],representativeLastname:["",s.kI.required],representativeDocument:["",s.kI.required]}),this.getAllCompanies()}getAllCompanies(){this.data=[],this.recentTransactionsDataSource.data=[],this._cryptoService.getData().subscribe(e=>{this.data=e,this.recentTransactionsDataSource.data=e.reverse()},e=>{this.alertService.alertMessage("error",e.error.message,!0)})}createCompany(){this.registerCompanyForm.invalid?this.alertService.alertMessage("error","Debe de completar todos los campos",!0):(this.registerCompanyForm.disable(),this._cryptoService.createCompany(this.buildCompanyModel()).subscribe(e=>{this.alertService.alertMessage("success","Registro creado exitosamente",!0),this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.getAllCompanies()},e=>{this.alertService.alertMessage("error",e.error.message,!0),this.registerCompanyForm.enable()}))}editCompany(e){this.updateCompanyBtn=!0,this.registerCompanyForm.get("name").setValue(e.name),this.registerCompanyForm.get("commercialName").setValue(e.commercialName),this.registerCompanyForm.get("document").setValue(e.document),this.registerCompanyForm.get("phone").setValue(e.phone),this.registerCompanyForm.get("mobile").setValue(e.mobile),this.registerCompanyForm.get("representativeName").setValue(e.legalRepresentative.person.name),this.registerCompanyForm.get("representativeLastname").setValue(e.legalRepresentative.person.lastName),this.registerCompanyForm.get("representativeDocument").setValue(e.legalRepresentative.person.document),this.idCompany=e.id}updateCompany(){this.registerCompanyForm.invalid?this.alertService.alertMessage("error","Debe de completar todos los campos",!0):(this.registerCompanyForm.disable(),this._cryptoService.updateCompany(this.buildCompanyModel(),this.idCompany).subscribe(e=>{this.alertService.alertMessage("success","Registro actualizado exitosamente",!0),this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.getAllCompanies()},e=>{this.alertService.alertMessage("error",e.error.message,!0),this.registerCompanyForm.enable()}))}buildCompanyModel(){return{name:this.registerCompanyForm.value.name,commercialName:this.registerCompanyForm.value.commercialName,document:this.registerCompanyForm.value.document,mobile:this.registerCompanyForm.value.mobile,phone:this.registerCompanyForm.value.mobile,legalRepresentative:{person:{name:this.registerCompanyForm.value.representativeName,lastName:this.registerCompanyForm.value.representativeLastname,document:this.registerCompanyForm.value.representativeDocument}}}}deleteCompany(e){this._cryptoService.deleteCompany(e.id).subscribe(o=>{this.alertService.alertMessage("success","Registro eliminado exitosamente",!0),this.getAllCompanies()},o=>{this.alertService.alertMessage("error",o.error.message,!0)})}clearFilters(){this.updateCompanyBtn=!1,this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.alertService.showAlert=!1}ngAfterViewInit(){this.recentTransactionsDataSource.sort=this.recentTransactionsTableMatSort}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||u)(t.Y36(l),t.Y36(s.QS),t.Y36(k.c))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["crypto"]],viewQuery:function(o,n){if(1&o&&(t.Gf(E,5),t.Gf(H,5,p.YE)),2&o){let m;t.iGM(m=t.CRH())&&(n.registerCompanyNgForm=m.first),t.iGM(m=t.CRH())&&(n.recentTransactionsTableMatSort=m.first)}},decls:76,vars:34,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8","w-full","mt-8"],[1,"flex","items-center"],[1,"flex","flex-col","flex-auto","p-6","bg-card","rounded-2xl","shadow","overflow-hidden",3,"formGroup"],["registerCompanyNgForm","ngForm"],[1,"text-lg","font-medium"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-6","mb-10"],[1,"flex"],[1,"flex-auto"],["matInput","",3,"placeholder","formControlName"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3"],[1,"flex-auto","gt-xs:pl-3"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["type","reset","mat-button","",3,"click"],["class","px-6 ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"overflow-x-auto","mx-6"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["recentTransactionsTable",""],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","commercialName"],["matColumnDef","document"],["matColumnDef","mobile"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","recentOrdersTableFooter"],["class","py-6 px-0 border-0","mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","h-16 border-0","mat-footer-row","",4,"matFooterRowDef"],[1,"mt-8",3,"appearance","showIcon","type"],["mat-flat-button","",1,"px-6","ml-3",3,"color","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"pr-6","font-medium","text-sm","text-secondary","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],["matTooltip","Editar registro","mat","","mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon",3,"click"],["matTooltip","Eliminar registro","mat-icon-button","","color","warn","aria-label","Example icon button with a vertical three dot icon",3,"click"],["mat-footer-cell","","colspan","6",1,"py-6","px-0","border-0"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],["mat-footer-row","",1,"h-16","border-0"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),t._uU(5,"Empresas registradas"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"form",6,7)(10,"p",8),t._uU(11,"Nueva Empresa"),t.qZA(),t.YNc(12,j,2,5,"fuse-alert",9),t._UZ(13,"mat-divider",10),t.TgZ(14,"div",11)(15,"mat-form-field",12),t._UZ(16,"input",13)(17,"mat-icon",14),t.qZA()(),t.TgZ(18,"div",15)(19,"mat-form-field",16),t._UZ(20,"input",13)(21,"mat-icon",14),t.qZA(),t.TgZ(22,"mat-form-field",17),t._UZ(23,"input",13)(24,"mat-icon",14),t.qZA(),t.TgZ(25,"mat-form-field",17),t._UZ(26,"input",13)(27,"mat-icon",14),t.qZA(),t.TgZ(28,"mat-form-field",17),t._UZ(29,"input",13)(30,"mat-icon",14),t.qZA()(),t.TgZ(31,"p",8),t._uU(32,"Representante Legal"),t.qZA(),t._UZ(33,"mat-divider",10),t.TgZ(34,"div",15)(35,"mat-form-field",17),t._UZ(36,"input",13)(37,"mat-icon",14),t.qZA(),t.TgZ(38,"mat-form-field",16),t._UZ(39,"input",13)(40,"mat-icon",14),t.qZA(),t.TgZ(41,"mat-form-field",17),t._UZ(42,"input",13)(43,"mat-icon",14),t.qZA()(),t.TgZ(44,"div",18)(45,"button",19),t.NdJ("click",function(){return n.clearFilters()}),t._uU(46," Cancelar "),t.qZA(),t.YNc(47,L,2,1,"button",20),t.YNc(48,V,2,1,"button",20),t.qZA()()(),t.TgZ(49,"div",21)(50,"div",22)(51,"table",23,24),t.ynx(53,25),t.YNc(54,P,2,0,"th",26),t.YNc(55,O,3,1,"td",27),t.BQk(),t.ynx(56,28),t.YNc(57,$,2,0,"th",26),t.YNc(58,q,3,1,"td",27),t.BQk(),t.ynx(59,29),t.YNc(60,z,2,0,"th",26),t.YNc(61,K,3,1,"td",27),t.BQk(),t.ynx(62,30),t.YNc(63,X,2,0,"th",26),t.YNc(64,W,3,1,"td",27),t.BQk(),t.ynx(65,31),t.YNc(66,tt,2,0,"th",26),t.YNc(67,ot,4,5,"td",27),t.BQk(),t.ynx(68,32),t.YNc(69,rt,2,0,"th",26),t.YNc(70,at,8,0,"td",27),t.BQk(),t.ynx(71,33),t.YNc(72,nt,1,0,"td",34),t.BQk(),t.YNc(73,it,1,0,"tr",35),t.YNc(74,st,1,0,"tr",36),t.YNc(75,mt,1,0,"tr",37),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("formGroup",n.registerCompanyForm),t.xp6(4),t.Q6J("ngIf",n.alertService.showAlert),t.xp6(4),t.Q6J("placeholder","Nombre")("formControlName","name"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(3),t.Q6J("placeholder","Nombre Comercial")("formControlName","commercialName"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:office-building"),t.xp6(2),t.Q6J("placeholder","Ruc")("formControlName","document"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:identification"),t.xp6(2),t.Q6J("placeholder","Telefono")("formControlName","phone"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:phone"),t.xp6(2),t.Q6J("placeholder","Celular")("formControlName","mobile"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:device-mobile"),t.xp6(6),t.Q6J("placeholder","Nombre")("formControlName","representativeName"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("placeholder","Apellido")("formControlName","representativeLastname"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("placeholder","Documento")("formControlName","representativeDocument"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:identification"),t.xp6(4),t.Q6J("ngIf",!n.updateCompanyBtn),t.xp6(1),t.Q6J("ngIf",n.updateCompanyBtn),t.xp6(3),t.Q6J("dataSource",n.recentTransactionsDataSource)("trackBy",n.trackByFn),t.xp6(22),t.Q6J("matHeaderRowDef",n.recentTransactionsTableColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.recentTransactionsTableColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(33,lt)))},dependencies:[h.lW,h.RK,g.KE,g.qo,x.Hw,T.Nt,p.YE,p.nU,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.mD,i.Ke,i.ge,i.ev,i.yh,i.XQ,i.Gk,i.Q2,b.mk,b.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,Z.d,G.W,N.gM],encapsulation:2,data:{animation:_.L},changeDetection:0})}class c{constructor(e){this._cryptoService=e}resolve(e,o){return this._cryptoService.getData()}static#t=this.\u0275fac=function(o){return new(o||c)(t.LFG(l))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}const ct=[{path:"",component:u,resolve:{data:c}}];var pt=a(6709),dt=a(1948),ut=a(5804),ft=a(7775),ht=a(1572);class f{static#t=this.\u0275fac=function(o){return new(o||f)};static#e=this.\u0275mod=t.oAB({type:f});static#o=this.\u0275inj=t.cJS({imports:[A.Bz.forChild(ct),h.ot,J.vV,g.lN,x.Ps,T.c,Q.Tx,D.LD,S.SJ,p.JX,i.p0,I.Nh,U.X,w.m,F.Cv,Z.t,pt.p9,dt.Fk,ut.J,ft.fC,N.AV,ht.Cq]})}}}]);