"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3024],{3024:(Qt,F,r)=>{r.r(F),r.d(F,{NotesModule:()=>I});var M=r(1390),d=r(4859),B=r(6709),m=r(7274),f=r(9549),N=r(7392),J=r(284),T=r(8255),Q=r(3238),Z=r(3267),U=r(6557),S=r(3921),Y=r(4466),t=r(4650);class y{constructor(){}static#t=this.\u0275fac=function(e){return new(e||y)};static#e=this.\u0275cmp=t.Xpm({type:y,selectors:[["notes"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[M.lC],encapsulation:2,changeDetection:0})}var h=r(1135),b=r(7579),H=r(9841),K=r(1884),v=r(4004),A=r(2722),D=r(9646),$=r(8372),g=r(3900),x=r(8505),G=r(5698),R=r(2843),O=r(5840),j=r(529);class p{constructor(n){this._httpClient=n,this._labels=new h.X(null),this._note=new h.X(null),this._notes=new h.X(null)}get labels$(){return this._labels.asObservable()}get notes$(){return this._notes.asObservable()}get note$(){return this._note.asObservable()}getLabels(){return this._httpClient.get("api/apps/notes/labels").pipe((0,x.b)(n=>{this._labels.next(n)}))}addLabel(n){return this._httpClient.post("api/apps/notes/labels",{title:n}).pipe((0,x.b)(e=>{this._labels.next(e)}))}updateLabel(n){return this._httpClient.patch("api/apps/notes/labels",{label:n}).pipe((0,x.b)(e=>{this.getNotes().subscribe(),this._labels.next(e)}))}deleteLabel(n){return this._httpClient.delete("api/apps/notes/labels",{params:{id:n}}).pipe((0,x.b)(e=>{this.getNotes().subscribe(),this._labels.next(e)}))}getNotes(){return this._httpClient.get("api/apps/notes/all").pipe((0,x.b)(n=>{this._notes.next(n)}))}getNoteById(n){return this._notes.pipe((0,G.q)(1),(0,v.U)(e=>{const o=e.find(s=>s.id===n)||null;return this._note.next(o),o}),(0,g.w)(e=>e?(0,D.of)(e):(0,R._)("Could not found the note with id of "+n+"!")))}addTask(n,e){return this._httpClient.post("api/apps/notes/tasks",{note:n,task:e}).pipe((0,g.w)(()=>this.getNotes().pipe((0,g.w)(()=>this.getNoteById(n.id)))))}createNote(n){return this._httpClient.post("api/apps/notes",{note:n}).pipe((0,g.w)(e=>this.getNotes().pipe((0,g.w)(()=>this.getNoteById(e.id).pipe((0,v.U)(()=>e))))))}updateNote(n){const e=(0,O.Z)(n);return e.labels.length&&(e.labels=e.labels.map(o=>o.id)),this._httpClient.patch("api/apps/notes",{updatedNote:e}).pipe((0,x.b)(o=>{this.getNotes().subscribe()}))}deleteNote(n){return this._httpClient.delete("api/apps/notes",{params:{id:n.id}}).pipe((0,v.U)(e=>(this.getNotes().subscribe(),e)))}static#t=this.\u0275fac=function(e){return new(e||p)(t.LFG(j.eN))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}var q=r(9349),l=r(6895),u=r(4006);function E(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.removeImage(s))}),t._UZ(4,"mat-icon",9),t.qZA()(),t._UZ(5,"img",10),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(1),t.Q6J("src",e.image,t.LSH)}}const z=function(i){return{"text-secondary line-through":i}};function W(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"mat-checkbox",18),t.NdJ("ngModelChange",function(s){const a=t.CHM(e).$implicit;return t.KtG(a.completed=s)})("change",function(){const c=t.CHM(e).$implicit,a=t.oxw(2).ngIf,_=t.oxw();return t.KtG(_.updateTaskOnNote(a,c))}),t.qZA(),t.TgZ(3,"input",19),t.NdJ("ngModelChange",function(s){const a=t.CHM(e).$implicit;return t.KtG(a.content=s)})("input",function(){const c=t.CHM(e).$implicit,a=t.oxw(2).ngIf,_=t.oxw();return t.KtG(_.updateTaskOnNote(a,c))}),t.qZA(),t.TgZ(4,"mat-icon",20),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2).ngIf,_=t.oxw();return t.KtG(_.removeTaskFromNote(a,c))}),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(2),t.Q6J("color","primary")("ngModel",e.completed),t.xp6(1),t.Q6J("ngClass",t.VKq(6,z,e.completed))("placeholder","Task")("ngModel",e.content),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x")}}function X(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.YNc(2,W,5,8,"ng-container",12),t.TgZ(3,"div",13),t._UZ(4,"mat-icon",14),t.TgZ(5,"input",15,16),t.NdJ("keydown.enter",function(){t.CHM(e);const s=t.MAs(6),c=t.oxw().ngIf;return t.oxw().addTaskToNote(c,s.value),t.KtG(s.value="")}),t.qZA()()(),t.BQk()}if(2&i){const e=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tasks)("ngForTrackBy",o.trackByFn),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:plus"),t.xp6(1),t.Q6J("placeholder","Add task")}}function P(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",22)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",23),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2).ngIf,_=t.oxw();return t.KtG(_.toggleLabelOnNote(a,c))}),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(3),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x-circle")}}function V(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",21),t.YNc(2,P,5,2,"ng-container",12),t.qZA(),t.BQk()),2&i){const e=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.labels)("ngForTrackBy",o.trackByFn)}}function tt(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",24)(2,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.createNote(s))}),t._uU(3," Save "),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("color","primary")("disabled",!e.title&&!e.content)}}function et(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",36),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(3).ngIf,_=t.oxw();return t.KtG(_.toggleLabelOnNote(a,c))}),t.TgZ(2,"span",13),t._UZ(3,"mat-checkbox",37),t.TgZ(4,"span",38),t._uU(5),t.qZA()()(),t.BQk()}if(2&i){const e=n.$implicit,o=t.oxw(3).ngIf,s=t.oxw();t.xp6(3),t.Q6J("color","primary")("checked",s.isNoteHasLabel(o,e)),t.xp6(2),t.Oqu(e.title)}}function nt(i,n){if(1&i&&(t.ynx(0),t.YNc(1,et,6,3,"ng-container",35),t.BQk()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function ot(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",26)(2,"div",27)(3,"div")(4,"input",28,29),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(5),c=t.oxw().ngIf,a=t.oxw();return t.KtG(a.uploadImage(c,s.files))}),t.qZA(),t.TgZ(6,"label",30),t._UZ(7,"mat-icon",31),t.qZA()(),t.TgZ(8,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.addTasksToNote(s))}),t._UZ(9,"mat-icon",31),t.qZA(),t.TgZ(10,"button",32),t._UZ(11,"mat-icon",31),t.qZA(),t.TgZ(12,"mat-menu",null,33),t.YNc(14,nt,2,1,"ng-container",1),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.toggleArchiveOnNote(s))}),t._UZ(17,"mat-icon",31),t.qZA(),t.TgZ(18,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.deleteNote(s))}),t._UZ(19,"mat-icon",31),t.qZA()(),t.TgZ(20,"button",34),t._uU(21," Close "),t.qZA()(),t.BQk()}if(2&i){const e=t.MAs(13),o=t.oxw(2);t.xp6(4),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:photograph"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:clipboard-list"),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:tag"),t.xp6(3),t.Q6J("ngIf",t.lcZ(15,9,o.labels$)),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:archive"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash")}}function it(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.YNc(1,E,6,2,"ng-container",1),t.TgZ(2,"div",2)(3,"div")(4,"input",3),t.NdJ("ngModelChange",function(s){const a=t.CHM(e).ngIf;return t.KtG(a.title=s)})("input",function(){const c=t.CHM(e).ngIf,a=t.oxw();return t.KtG(a.updateNoteDetails(c))}),t.qZA()(),t.TgZ(5,"div",4)(6,"textarea",5),t.NdJ("ngModelChange",function(s){const a=t.CHM(e).ngIf;return t.KtG(a.content=s)})("input",function(){const c=t.CHM(e).ngIf,a=t.oxw();return t.KtG(a.updateNoteDetails(c))}),t.qZA()(),t.YNc(7,X,7,4,"ng-container",1),t.YNc(8,V,3,2,"ng-container",1),t.YNc(9,tt,4,2,"ng-container",1),t.YNc(10,ot,22,11,"ng-container",1),t.qZA(),t.BQk()}if(2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",e.image),t.xp6(3),t.Q6J("placeholder","Title")("ngModel",e.title),t.xp6(2),t.Q6J("placeholder","Note")("ngModel",e.content),t.xp6(1),t.Q6J("ngIf",e.tasks),t.xp6(1),t.Q6J("ngIf",e.labels&&e.labels.length),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",e.id)}}class C{constructor(n,e,o,s){this._changeDetectorRef=n,this._data=e,this._notesService=o,this._matDialogRef=s,this.noteChanged=new b.x,this._unsubscribeAll=new b.x}ngOnInit(){this._data.note.id?(this._notesService.getNoteById(this._data.note.id).subscribe(),this.note$=this._notesService.note$):this.note$=(0,D.of)({id:null,title:"",content:"",tasks:null,image:null,reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null}),this.labels$=this._notesService.labels$,this.noteChanged.pipe((0,A.R)(this._unsubscribeAll),(0,$.b)(500),(0,g.w)(n=>this._notesService.updateNote(n))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createNote(n){this._notesService.createNote(n).pipe((0,v.U)(()=>{this.note$=this._notesService.note$})).subscribe()}uploadImage(n,e){if(!e.length)return;const s=e[0];!["image/jpeg","image/png"].includes(s.type)||this._readAsDataURL(s).then(c=>{n.image=c,this.noteChanged.next(n)})}removeImage(n){n.image=null,this.noteChanged.next(n)}addTasksToNote(n){n.tasks||(n.tasks=[])}addTaskToNote(n,e){""!==e.trim()&&this._notesService.addTask(n,e).subscribe()}removeTaskFromNote(n,e){n.tasks=n.tasks.filter(o=>o.id!==e.id),this.noteChanged.next(n)}updateTaskOnNote(n,e){e.id&&this.noteChanged.next(n)}isNoteHasLabel(n,e){return!!n.labels.find(o=>o.id===e.id)}toggleLabelOnNote(n,e){this.isNoteHasLabel(n,e)?n.labels=n.labels.filter(o=>o.id!==e.id):n.labels.push(e),this.noteChanged.next(n)}toggleArchiveOnNote(n){n.archived=!n.archived,this.noteChanged.next(n),this._matDialogRef.close()}updateNoteDetails(n){this.noteChanged.next(n)}deleteNote(n){this._notesService.deleteNote(n).subscribe(e=>{!e||this._matDialogRef.close()})}trackByFn(n,e){return e.id||n}_readAsDataURL(n){return new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{e(s.result)},s.onerror=c=>{o(c)},s.readAsDataURL(n)})}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(t.sBO),t.Y36(m.WI),t.Y36(p),t.Y36(m.so))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["notes-details"]],decls:3,vars:3,consts:[[1,"flex","flex-col","flex-auto","md:w-160","md:min-w-160","-m-6"],[4,"ngIf"],[1,"m-4"],[1,"w-full","p-2","text-2xl",3,"placeholder","ngModel","ngModelChange","input"],[1,"flex","w-full","py-5","px-2"],["cdkTextareaAutosize","",1,"w-full",3,"placeholder","ngModel","ngModelChange","input"],[1,"relative","w-full"],[1,"absolute","right-0","bottom-0","p-4"],["mat-icon-button","",3,"click"],[1,"text-white",3,"svgIcon"],[1,"w-full","object-cover",3,"src"],[1,"mx-2","mt-4","space-y-1.5"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center"],[1,"-ml-0.5","icon-size-5","text-hint",3,"svgIcon"],[1,"w-full","ml-1.5","px-1","py-0.5",3,"placeholder","keydown.enter"],["newTaskInput",""],[1,"group","flex","items-center"],[1,"flex","items-center",3,"color","ngModel","ngModelChange","change"],[1,"w-full","px-1","py-0.5",3,"ngClass","placeholder","ngModel","ngModelChange","input"],[1,"hidden","group-hover:flex","ml-auto","icon-size-5","cursor-pointer",3,"svgIcon","click"],[1,"flex","flex-wrap","items-center","mx-1","mt-6"],[1,"flex","items-center","m-1","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"ml-1","icon-size-4","cursor-pointer",3,"svgIcon","click"],[1,"flex","items-center","justify-end","mt-4"],["mat-flat-button","",3,"color","disabled","click"],[1,"flex","items-center","justify-between","mt-4"],[1,"flex","items-center","space-x-2"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-gray-400","hover:bg-opacity-20","dark:hover:bg-black","dark:hover:bg-opacity-5"],[3,"svgIcon"],["mat-icon-button","",3,"matMenuTriggerFor"],["labelsMenu","matMenu"],["mat-flat-button","","matDialogClose",""],[4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["disableRipple","",1,"flex","items-center","pointer-events-none",3,"color","checked"],[1,"ml-1","leading-5"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,it,11,9,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.note$)))},dependencies:[d.lW,d.RK,B.oG,m.ZT,N.Hw,q.IC,T.VK,T.OP,T.p6,Q.wG,l.mk,l.sg,l.O5,u.Fj,u.JJ,u.On,l.Ov],encapsulation:2,changeDetection:0})}var st=r(9300);function ct(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",13)(2,"button",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.deleteLabel(c.id))}),t._UZ(3,"mat-icon",9),t.qZA(),t.TgZ(4,"input",15),t.NdJ("ngModelChange",function(s){const a=t.CHM(e).$implicit;return t.KtG(a.title=s)})("input",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.updateLabel(c))}),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(3),t.Q6J("svgIcon","heroicons_solid:trash"),t.xp6(1),t.Q6J("autocomplete","off")("ngModel",e.title)}}function at(i,n){if(1&i&&(t.ynx(0),t.YNc(1,ct,5,3,"ng-container",12),t.BQk()),2&i){const e=n.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}class k{constructor(n,e){this._changeDetectorRef=n,this._notesService=e,this.labelChanged=new b.x,this._unsubscribeAll=new b.x}ngOnInit(){this.labels$=this._notesService.labels$,this.labelChanged.pipe((0,A.R)(this._unsubscribeAll),(0,$.b)(500),(0,st.h)(n=>""!==n.title.trim()),(0,g.w)(n=>this._notesService.updateLabel(n))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addLabel(n){this._notesService.addLabel(n).subscribe()}updateLabel(n){this.labelChanged.next(n)}deleteLabel(n){this._notesService.deleteLabel(n).subscribe(()=>{this._changeDetectorRef.markForCheck()})}trackByFn(n,e){return e.id||n}static#t=this.\u0275fac=function(e){return new(e||k)(t.Y36(t.sBO),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["notes-labels"]],decls:14,vars:9,consts:[[1,"flex","flex-col","flex-auto","w-80","min-w-80","p-2","md:p-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold"],["matDialogClose","","mat-icon-button",""],[3,"svgIcon"],[1,"fuse-mat-dense","w-full","mt-8"],["name","new-label","matInput","",3,"autocomplete","placeholder"],["newLabelInput",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","mt-4"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"fuse-mat-dense","w-full"],["mat-icon-button","","matPrefix","",3,"click"],["required","","matInput","",3,"autocomplete","ngModel","ngModelChange","input"]],template:function(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Edit labels"),t.qZA(),t.TgZ(4,"button",3),t._UZ(5,"mat-icon",4),t.qZA()(),t.TgZ(6,"mat-form-field",5),t._UZ(7,"input",6,7),t.TgZ(9,"button",8),t.NdJ("click",function(){t.CHM(s);const a=t.MAs(8);return o.addLabel(a.value),t.KtG(a.value="")}),t._UZ(10,"mat-icon",9),t.qZA()(),t.TgZ(11,"div",10),t.YNc(12,at,2,2,"ng-container",11),t.ALo(13,"async"),t.qZA()()}if(2&e){const s=t.MAs(8);t.xp6(5),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(2),t.Q6J("autocomplete","off")("placeholder","Create new label"),t.xp6(2),t.ekj("invisible",""===s.value.trim()),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check-circle"),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,7,o.labels$))}},dependencies:[d.RK,m.ZT,f.KE,f.qo,f.R9,N.Hw,J.Nt,l.sg,l.O5,u.Fj,u.JJ,u.Q7,u.On,l.Ov],encapsulation:2,changeDetection:0})}var rt=r(4880);const L=function(i,n){return{"bg-gray-200 dark:bg-gray-700 text-primary dark:text-primary-400":i,"text-hint hover:bg-hover":n}};function lt(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.filterByLabel(c.id))}),t._UZ(2,"mat-icon",7),t.TgZ(3,"div",8),t._uU(4),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(4,L,"label:"+e.id===o.filterStatus,"label:"+e.id!==o.filterStatus))("matRippleDisabled","label:"+e.id===o.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:tag"),t.xp6(2),t.Oqu(e.title)}}function _t(i,n){if(1&i&&(t.ynx(0),t.YNc(1,lt,5,7,"ng-container",29),t.BQk()),2&i){const e=n.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}function gt(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"img",35),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function pt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",36),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.title," ")}}function ut(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.ekj("text-xl",e.content.length<70),t.xp6(1),t.hij(" ",e.content," ")}}function dt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",39),t._UZ(2,"div",40),t.qZA(),t.BQk())}function mt(i,n){1&i&&(t.ynx(0),t._UZ(1,"mat-icon",41),t.BQk()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check-circle"))}const ft=function(i){return{"text-secondary line-through":i}};function xt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",15),t.YNc(2,dt,3,0,"ng-container",9),t.YNc(3,mt,2,1,"ng-container",9),t.TgZ(4,"div",38),t._uU(5),t.qZA()(),t.BQk()),2&i){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",!e.completed),t.xp6(1),t.Q6J("ngIf",e.completed),t.xp6(1),t.Q6J("ngClass",t.VKq(4,ft,e.completed)),t.xp6(1),t.hij(" ",e.content," ")}}function ht(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",37),t.YNc(2,xt,6,6,"ng-container",29),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit,o=t.oxw(5);t.xp6(2),t.Q6J("ngForOf",e.tasks)("ngForTrackBy",o.trackByFn)}}function bt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",43),t._uU(2),t.qZA(),t.BQk()),2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.title," ")}}function vt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",42),t.YNc(2,bt,3,1,"ng-container",29),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit,o=t.oxw(5);t.xp6(2),t.Q6J("ngForOf",e.labels)("ngForTrackBy",o.trackByFn)}}function Ct(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",33),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(5);return t.KtG(a.openNoteDialog(c))}),t.YNc(2,gt,2,1,"ng-container",9),t.TgZ(3,"div",34),t.YNc(4,pt,3,1,"ng-container",9),t.YNc(5,ut,3,3,"ng-container",9),t.YNc(6,ht,3,2,"ng-container",9),t.YNc(7,vt,3,2,"ng-container",9),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",e.image),t.xp6(2),t.Q6J("ngIf",e.title),t.xp6(1),t.Q6J("ngIf",e.content),t.xp6(1),t.Q6J("ngIf",e.tasks),t.xp6(1),t.Q6J("ngIf",e.labels)}}function Nt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",32),t.YNc(2,Ct,8,5,"ng-container",29),t.qZA(),t.BQk()),2&i){const e=n.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("ngForOf",e.items)("ngForTrackBy",o.trackByFn)}}function Tt(i,n){if(1&i&&t.YNc(0,Nt,3,2,"ng-container",29),2&i){const e=n.$implicit,o=t.oxw(3);t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}function Zt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"fuse-masonry",30),t.YNc(2,Tt,1,2,"ng-template",null,31,t.W1O),t.qZA(),t.BQk()),2&i){const e=t.MAs(3),o=t.oxw().ngIf,s=t.oxw();t.xp6(1),t.Q6J("items",o)("columns",s.masonryColumns)("columnsTemplate",e)}}function yt(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Zt,4,3,"ng-container",26),t.BQk()),2&i){const e=n.ngIf;t.oxw();const o=t.MAs(39);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",o)}}function kt(i,n){1&i&&(t.TgZ(0,"div",44)(1,"div",45),t._uU(2,"Loading..."),t.qZA()())}function wt(i,n){1&i&&(t.TgZ(0,"div",44),t._UZ(1,"mat-icon",46),t.TgZ(2,"div",45),t._uU(3,"There are no notes!"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:document"))}class w{constructor(n,e,o,s){this._changeDetectorRef=n,this._fuseMediaWatcherService=e,this._matDialog=o,this._notesService=s,this.drawerMode="side",this.drawerOpened=!0,this.filter$=new h.X("notes"),this.searchQuery$=new h.X(null),this.masonryColumns=4,this._unsubscribeAll=new b.x}get filterStatus(){return this.filter$.value}ngOnInit(){this._notesService.getLabels().subscribe(),this._notesService.getNotes().subscribe(),this.labels$=this._notesService.labels$,this.notes$=(0,H.a)([this._notesService.notes$,this.filter$,this.searchQuery$]).pipe((0,K.x)(),(0,v.U)(([n,e,o])=>{if(!n||!n.length)return;let s=n;o&&(o=o.trim().toLowerCase(),s=s.filter(a=>a.title.toLowerCase().includes(o)||a.content.toLowerCase().includes(o)));const c="archived"===e;if(s=s.filter(a=>a.archived===c),e.startsWith("label:")){const a=e.split(":")[1];s=s.filter(_=>!!_.labels.find(Jt=>Jt.id===a))}return s})),this._fuseMediaWatcherService.onMediaChange$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(({matchingAliases:n})=>{n.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this.masonryColumns=n.includes("xl")?5:n.includes("lg")?4:n.includes("md")?3:n.includes("sm")?2:1,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addNewNote(){this._matDialog.open(C,{autoFocus:!1,data:{note:{}}})}openEditLabelsDialog(){this._matDialog.open(k,{autoFocus:!1})}openNoteDialog(n){this._matDialog.open(C,{autoFocus:!1,data:{note:(0,O.Z)(n)}})}filterByArchived(){this.filter$.next("archived")}filterByLabel(n){this.filter$.next(`label:${n}`)}filterByQuery(n){this.searchQuery$.next(n)}resetFilter(){this.filter$.next("notes")}trackByFn(n,e){return e.id||n}static#t=this.\u0275fac=function(e){return new(e||w)(t.Y36(t.sBO),t.Y36(rt.T),t.Y36(m.uw),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:w,selectors:[["notes-list"]],decls:40,vars:29,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent"],[1,"w-2/3","sm:w-72","lg:w-56","border-r-0","bg-default",3,"mode","opened"],["drawer",""],[1,"p-6","lg:py-8","lg:pl-4","lg:pr-0"],[1,"space-y-2"],["matRipple","",1,"relative","flex","items-center","py-2","px-4","font-medium","rounded-full","cursor-pointer",3,"ngClass","matRippleDisabled","click"],[1,"text-current",3,"svgIcon"],[1,"ml-3","leading-5","select-none","text-default"],[4,"ngIf"],["matRipple","",1,"relative","flex","items-center","py-2","px-4","font-medium","rounded-full","cursor-pointer","hover:bg-hover",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"ml-3","leading-5","select-none"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center"],[1,"flex","items-center","flex-auto"],["mat-icon-button","",1,"flex","lg:hidden","-ml-2",3,"click"],[3,"svgIcon"],[1,"fuse-mat-rounded","fuse-mat-dense","flex-auto","ml-4","lg:ml-0",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder","input"],["searchInput",""],["mat-flat-button","",1,"ml-4","px-1","sm:px-4","min-w-10",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"hidden","sm:inline-block","ml-2"],[4,"ngIf","ngIfElse"],["loading",""],["noNotes",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"-mx-2","mt-8",3,"items","columns","columnsTemplate"],["columnsTemplate",""],[1,"flex-1","px-2","space-y-4"],[1,"flex","flex-col","shadow","rounded-2xl","overflow-hidden","cursor-pointer","bg-card",3,"click"],[1,"flex","flex-auto","flex-col","p-6","space-y-4"],[1,"w-full","object-cover",3,"src"],[1,"font-semibold","line-clamp-3"],[1,"space-y-1.5"],[1,"ml-1.5","leading-5",3,"ngClass"],[1,"flex","items-center","justify-center","w-5","h-5"],[1,"w-4","h-4","rounded-full","border-2"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"flex","flex-wrap","items-center","-m-1"],[1,"m-1","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"],[1,"icon-size-24",3,"svgIcon"]],template:function(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"div",4)(5,"div",5)(6,"div",6),t.NdJ("click",function(){return o.resetFilter()}),t._UZ(7,"mat-icon",7),t.TgZ(8,"div",8),t._uU(9,"Notes"),t.qZA()(),t.TgZ(10,"div",6),t.NdJ("click",function(){return o.filterByArchived()}),t._UZ(11,"mat-icon",7),t.TgZ(12,"div",8),t._uU(13,"Archive"),t.qZA()(),t.YNc(14,_t,2,2,"ng-container",9),t.ALo(15,"async"),t.TgZ(16,"div",10),t.NdJ("click",function(){return o.openEditLabelsDialog()}),t._UZ(17,"mat-icon",11),t.TgZ(18,"div",12),t._uU(19,"Edit labels"),t.qZA()()()()(),t.TgZ(20,"mat-drawer-content",13)(21,"div",14)(22,"div",15)(23,"div",16)(24,"button",17),t.NdJ("click",function(){t.CHM(s);const a=t.MAs(3);return t.KtG(a.toggle())}),t._UZ(25,"mat-icon",18),t.qZA(),t.TgZ(26,"mat-form-field",19),t._UZ(27,"mat-icon",20),t.TgZ(28,"input",21,22),t.NdJ("input",function(){t.CHM(s);const a=t.MAs(29);return t.KtG(o.filterByQuery(a.value))}),t.qZA()()(),t.TgZ(30,"button",23),t.NdJ("click",function(){return o.addNewNote()}),t._UZ(31,"mat-icon",24),t.TgZ(32,"span",25),t._uU(33,"New note"),t.qZA()()(),t.YNc(34,yt,2,2,"ng-container",26),t.ALo(35,"async"),t.YNc(36,kt,3,0,"ng-template",null,27,t.W1O),t.YNc(38,wt,4,1,"ng-template",null,28,t.W1O),t.qZA()()()()}if(2&e){const s=t.MAs(37);t.xp6(2),t.Q6J("mode",o.drawerMode)("opened",o.drawerOpened),t.xp6(4),t.Q6J("ngClass",t.WLB(23,L,"notes"===o.filterStatus,"notes"!==o.filterStatus))("matRippleDisabled","notes"===o.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:pencil-alt"),t.xp6(3),t.Q6J("ngClass",t.WLB(26,L,"archived"===o.filterStatus,"archived"!==o.filterStatus))("matRippleDisabled","archived"===o.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:archive"),t.xp6(3),t.Q6J("ngIf",t.lcZ(15,19,o.labels$)),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:pencil"),t.xp6(8),t.Q6J("svgIcon","heroicons_outline:menu"),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("autocomplete","off")("placeholder","Search notes"),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(3),t.Q6J("ngIf",t.lcZ(35,21,o.notes$))("ngIfElse",s)}},dependencies:[d.lW,d.RK,f.KE,f.qo,N.Hw,J.Nt,Q.wG,Z.jA,Z.kh,Z.LW,U.H,l.mk,l.sg,l.O5,l.Ov],encapsulation:2,changeDetection:0})}const It=[{path:"",component:y,children:[{path:"",component:w}]}];class I{static#t=this.\u0275fac=function(e){return new(e||I)};static#e=this.\u0275mod=t.oAB({type:I});static#n=this.\u0275inj=t.cJS({imports:[M.Bz.forChild(It),d.ot,B.p9,m.Is,f.lN,N.Ps,J.c,T.Tx,Q.si,Z.SJ,S.O,Y.m]})}}}]);