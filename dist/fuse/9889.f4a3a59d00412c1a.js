"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9889],{9889:(Te,T,a)=>{a.r(T),a.d(T,{CryptoModule:()=>C});var Q=a(3162),U=a(1390),y=a(4859),w=a(811),v=a(9549),b=a(7392),Z=a(284),I=a(8255),M=a(4385),E=a(3267),h=a(6308),i=a(671),R=a(3848),Y=a(6205),B=a(4466),k=a(7579),m=a(4006),G=a(8288),f=(()=>((f||(f={})).DEFAULT_MESSAGE_ERROR="Busqueda sin resultados",f))(),e=a(4650),_=a(1135),V=a(8505),c=a(5597),A=a(529);class l{constructor(t){this._httpClient=t,this._data=new _.X(null)}get data$(){return this._data.asObservable()}getData(){return this._httpClient.get(c.d.API_PATH.concat("/v1/company")).pipe((0,V.b)(t=>{this._data.next(t)}))}createCompany(t){return this._httpClient.post(c.d.API_PATH+"/v1/company/create",t)}updateCompany(t,o){return this._httpClient.patch(c.d.API_PATH+"/v1/company/update/"+o,t)}deleteCompany(t){return this._httpClient.delete(c.d.API_PATH+"/v1/company/delete/"+t)}static#e=this.\u0275fac=function(o){return new(o||l)(e.LFG(A.eN))};static#t=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}var F=a(7915),H=a(3900),N=a(2843),L=a(9646),j=a(262);class p{constructor(t,o){this._httpClient=t,this.alertService=o,this.genericSearchApi=[{key:"company",apiValue:"/v1/company/search"},{key:"persons",apiValue:"/v1/persons/search"},{key:"proyect",apiValue:"/v1/proyect/search"}]}genericSearch(t,o){const n=this.genericSearchApi.filter(s=>s.key==o)[0];return this._httpClient.get(c.d.API_PATH+n.apiValue,{params:{searchValue:t}}).pipe((0,H.w)(s=>0==s.length?(0,N._)("Empty data"):(0,L.of)(s)),(0,j.K)(s=>(0,N._)("Error connection api",s)))}static#e=this.\u0275fac=function(o){return new(o||p)(e.LFG(A.eN),e.LFG(F.c))};static#t=this.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}var S=a(6895),J=a(4850),P=a(8214),D=a(266);const z=["registerCompanyNgForm"],O=["recentTransactionsTable"];function K(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.createCompany())}),e._uU(1," Guardar "),e.qZA()}2&r&&e.Q6J("color","primary")}function $(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.updateCompany())}),e._uU(1," Actualizar "),e.qZA()}2&r&&e.Q6J("color","primary")}function q(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Nombre "),e.qZA())}function X(r,t){if(1&r&&(e.TgZ(0,"td",44)(1,"span",45),e._uU(2),e.qZA()()),2&r){const o=t.$implicit;e.xp6(2),e.hij(" ",o.name," ")}}function W(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Nombre empresa "),e.qZA())}function ee(r,t){if(1&r&&(e.TgZ(0,"td",44)(1,"span",45),e._uU(2),e.qZA()()),2&r){const o=t.$implicit;e.xp6(2),e.hij(" ",o.commercialName," ")}}function te(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Ruc "),e.qZA())}function oe(r,t){if(1&r&&(e.TgZ(0,"td",44)(1,"span",45),e._uU(2),e.qZA()()),2&r){const o=t.$implicit;e.xp6(2),e.hij(" ",o.document," ")}}function re(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Telefono "),e.qZA())}function ae(r,t){if(1&r&&(e.TgZ(0,"td",44)(1,"span",45),e._uU(2),e.qZA()()),2&r){const o=t.$implicit;e.xp6(2),e.hij(" ",o.mobile," ")}}function ne(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Estado "),e.qZA())}const se=function(r,t){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":r,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":t}};function ie(r,t){if(1&r&&(e.TgZ(0,"td",44)(1,"span",46)(2,"span",47),e._uU(3),e.qZA()()()),2&r){const o=t.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,se,"REG"===o.status,"INA"===o.status)),e.xp6(2),e.Oqu(o.status)}}function me(r,t){1&r&&(e.TgZ(0,"th",43),e._uU(1," Acciones "),e.qZA())}function le(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"td",44)(1,"div")(2,"button",48),e.NdJ("click",function(){const u=e.CHM(o).$implicit,x=e.oxw();return e.KtG(x.editCompany(u))}),e.TgZ(3,"mat-icon"),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"button",49),e.NdJ("click",function(){const u=e.CHM(o).$implicit,x=e.oxw();return e.KtG(x.deleteCompany(u))}),e.TgZ(6,"mat-icon"),e._uU(7,"delete"),e.qZA()()()()}}function ce(r,t){1&r&&e._UZ(0,"td",50)}function pe(r,t){1&r&&e._UZ(0,"tr",51)}function de(r,t){1&r&&e._UZ(0,"tr",52)}function ue(r,t){1&r&&e._UZ(0,"tr",53)}const he=function(){return["recentOrdersTableFooter"]};class g{constructor(t,o,n,s){this._cryptoService=t,this._formBuilder=o,this.alertService=n,this.searchService=s,this.recentTransactionsDataSource=new i.by,this.recentTransactionsTableColumns=["name","commercialName","document","mobile","status","actions"],this._unsubscribeAll=new k.x,this.updateCompanyBtn=!1,this.idCompany=0}ngOnInit(){this.registerCompanyForm=this._formBuilder.group({name:["",m.kI.required],commercialName:["",[m.kI.required]],document:["",m.kI.required],phone:["",m.kI.required],mobile:["",m.kI.required],representativeName:["",m.kI.required],representativeLastname:["",m.kI.required],representativeDocument:["",m.kI.required]}),this.getAllCompanies()}getAllCompanies(){this.data=[],this.recentTransactionsDataSource.data=[],this._cryptoService.getData().subscribe(t=>{this.data=t,this.recentTransactionsDataSource.data=t.reverse()},t=>{this.alertService.showAlertMessage("error",t.error.message)})}createCompany(){this.registerCompanyForm.invalid?this.alertService.showAlertMessage("error","Debe de completar todos los campos"):(this.registerCompanyForm.disable(),this._cryptoService.createCompany(this.buildCompanyModel()).subscribe(t=>{this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.getAllCompanies(),this.alertService.showAlertMessage("info","Registro creado !")},t=>{this.alertService.showAlertMessage("error",t.error.message),this.registerCompanyForm.enable()}))}editCompany(t){this.updateCompanyBtn=!0,this.registerCompanyForm.get("name").setValue(t.name),this.registerCompanyForm.get("commercialName").setValue(t.commercialName),this.registerCompanyForm.get("document").setValue(t.document),this.registerCompanyForm.get("phone").setValue(t.phone),this.registerCompanyForm.get("mobile").setValue(t.mobile),this.registerCompanyForm.get("representativeName").setValue(t.legalRepresentative.person.name),this.registerCompanyForm.get("representativeLastname").setValue(t.legalRepresentative.person.lastName),this.registerCompanyForm.get("representativeDocument").setValue(t.legalRepresentative.person.document),this.idCompany=t.id}updateCompany(){this.registerCompanyForm.invalid?this.alertService.showAlertMessage("error","Debe de completar todos los campos"):(this.registerCompanyForm.disable(),this._cryptoService.updateCompany(this.buildCompanyModel(),this.idCompany).subscribe(t=>{this.alertService.showAlertMessage("success","Registro actualizado exitosamente"),this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.clearFilters(),this.getAllCompanies(),this.alertService.showAlertMessage("info","Registro actualizado !")},t=>{this.alertService.showAlertMessage("error",t.error.message),this.registerCompanyForm.enable()}))}buildCompanyModel(){return{name:this.registerCompanyForm.value.name,commercialName:this.registerCompanyForm.value.commercialName,document:this.registerCompanyForm.value.document,mobile:this.registerCompanyForm.value.mobile,phone:this.registerCompanyForm.value.mobile,legalRepresentative:{person:{name:this.registerCompanyForm.value.representativeName,lastName:this.registerCompanyForm.value.representativeLastname,document:this.registerCompanyForm.value.representativeDocument}}}}deleteCompany(t){this._cryptoService.deleteCompany(t.id).subscribe(o=>{this.alertService.showAlertMessage("success","Registro eliminado !"),this.getAllCompanies()},o=>{this.alertService.showAlertMessage("error",o.error.message)})}searchCompany(t){"Enter"==t.code&&this.searchService.genericSearch(t.target.value,"company").subscribe(o=>{this.data=o,this.recentTransactionsDataSource.data=o.reverse(),this.alertService.hideAlertMessage()},o=>{this.alertService.showAlertMessage("warning",f.DEFAULT_MESSAGE_ERROR)})}dismiss(t){this.clearFilters()}clearFilters(){this.updateCompanyBtn=!1,this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.alertService.hideAlertMessage()}ngAfterViewInit(){this.recentTransactionsDataSource.sort=this.recentTransactionsTableMatSort}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(t,o){return o.id||t}static#e=this.\u0275fac=function(o){return new(o||g)(e.Y36(l),e.Y36(m.QS),e.Y36(F.c),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:g,selectors:[["crypto"]],viewQuery:function(o,n){if(1&o&&(e.Gf(z,5),e.Gf(O,5,h.YE)),2&o){let s;e.iGM(s=e.CRH())&&(n.registerCompanyNgForm=s.first),e.iGM(s=e.CRH())&&(n.recentTransactionsTableMatSort=s.first)}},decls:83,vars:43,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8","w-full","mt-8"],[1,"flex","items-center"],[1,"flex","flex-col","flex-auto","p-6","bg-card","rounded-2xl","shadow","overflow-hidden",3,"formGroup"],["registerCompanyNgForm","ngForm"],[1,"text-lg","font-medium"],[1,"mt-6","mb-10"],[1,"flex"],[1,"flex-auto"],["matInput","",3,"placeholder","formControlName"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3"],[1,"flex-auto","gt-xs:pl-3"],["matInput","","type","number",3,"placeholder","formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["type","reset","mat-button","",3,"click"],["class","px-6 ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"overflow-x-auto","mx-6"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matInput","",3,"autocomplete","placeholder","keypress"],[1,"mt-8",3,"appearance","showIcon","type","dismissible","dismissed","name"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["recentTransactionsTable",""],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","commercialName"],["matColumnDef","document"],["matColumnDef","mobile"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","recentOrdersTableFooter"],["class","py-6 px-0 border-0","mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","h-16 border-0","mat-footer-row","",4,"matFooterRowDef"],["mat-flat-button","",1,"px-6","ml-3",3,"color","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"pr-6","font-medium","text-sm","text-secondary","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],["matTooltip","Editar registro","mat","","mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon",3,"click"],["type","submit","matTooltip","Eliminar registro","mat-icon-button","","color","warn","aria-label","Example icon button with a vertical three dot icon",3,"click"],["mat-footer-cell","","colspan","6",1,"py-6","px-0","border-0"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],["mat-footer-row","",1,"h-16","border-0"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),e._uU(5,"Empresas registradas"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div")(8,"div",5)(9,"form",6,7)(11,"p",8),e._uU(12,"Nueva Empresa"),e.qZA(),e._UZ(13,"mat-divider",9),e.TgZ(14,"div",10)(15,"mat-form-field",11),e._UZ(16,"input",12)(17,"mat-icon",13),e.qZA()(),e.TgZ(18,"div",14)(19,"mat-form-field",15),e._UZ(20,"input",12)(21,"mat-icon",13),e.qZA(),e.TgZ(22,"mat-form-field",16),e._UZ(23,"input",17)(24,"mat-icon",13),e.qZA(),e.TgZ(25,"mat-form-field",16),e._UZ(26,"input",17)(27,"mat-icon",13),e.qZA(),e.TgZ(28,"mat-form-field",16),e._UZ(29,"input",17)(30,"mat-icon",13),e.qZA()(),e.TgZ(31,"p",8),e._uU(32,"Representante Legal"),e.qZA(),e._UZ(33,"mat-divider",9),e.TgZ(34,"div",14)(35,"mat-form-field",16),e._UZ(36,"input",12)(37,"mat-icon",13),e.qZA(),e.TgZ(38,"mat-form-field",15),e._UZ(39,"input",12)(40,"mat-icon",13),e.qZA(),e.TgZ(41,"mat-form-field",16),e._UZ(42,"input",17)(43,"mat-icon",13),e.qZA()(),e.TgZ(44,"div",18)(45,"button",19),e.NdJ("click",function(){return n.clearFilters()}),e._uU(46," Cancelar "),e.qZA(),e.YNc(47,K,2,1,"button",20),e.YNc(48,$,2,1,"button",20),e.qZA()()()(),e.TgZ(49,"div",21)(50,"div",22)(51,"div",23)(52,"div",11)(53,"mat-form-field",24),e._UZ(54,"mat-icon",13),e.TgZ(55,"input",25),e.NdJ("keypress",function(u){return n.searchCompany(u)}),e.qZA()()()(),e.TgZ(56,"fuse-alert",26),e._uU(57),e.qZA(),e.TgZ(58,"table",27,28),e.ynx(60,29),e.YNc(61,q,2,0,"th",30),e.YNc(62,X,3,1,"td",31),e.BQk(),e.ynx(63,32),e.YNc(64,W,2,0,"th",30),e.YNc(65,ee,3,1,"td",31),e.BQk(),e.ynx(66,33),e.YNc(67,te,2,0,"th",30),e.YNc(68,oe,3,1,"td",31),e.BQk(),e.ynx(69,34),e.YNc(70,re,2,0,"th",30),e.YNc(71,ae,3,1,"td",31),e.BQk(),e.ynx(72,35),e.YNc(73,ne,2,0,"th",30),e.YNc(74,ie,4,5,"td",31),e.BQk(),e.ynx(75,36),e.YNc(76,me,2,0,"th",30),e.YNc(77,le,8,0,"td",31),e.BQk(),e.ynx(78,37),e.YNc(79,ce,1,0,"td",38),e.BQk(),e.YNc(80,pe,1,0,"tr",39),e.YNc(81,de,1,0,"tr",40),e.YNc(82,ue,1,0,"tr",41),e.qZA()()()()()()),2&o&&(e.xp6(9),e.Q6J("formGroup",n.registerCompanyForm),e.xp6(7),e.Q6J("placeholder","Nombre")("formControlName","name"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:user-circle"),e.xp6(3),e.Q6J("placeholder","Nombre Comercial")("formControlName","commercialName"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:office-building"),e.xp6(2),e.Q6J("placeholder","Ruc")("formControlName","document"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(2),e.Q6J("placeholder","Telefono")("formControlName","phone"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:phone"),e.xp6(2),e.Q6J("placeholder","Celular")("formControlName","mobile"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:device-mobile"),e.xp6(6),e.Q6J("placeholder","Nombre")("formControlName","representativeName"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:user-circle"),e.xp6(2),e.Q6J("placeholder","Apellido")("formControlName","representativeLastname"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:user-circle"),e.xp6(2),e.Q6J("placeholder","Documento")("formControlName","representativeDocument"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(4),e.Q6J("ngIf",!n.updateCompanyBtn),e.xp6(1),e.Q6J("ngIf",n.updateCompanyBtn),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("autocomplete","off")("placeholder","Buscar empresa"),e.xp6(1),e.Q6J("appearance","soft")("showIcon",!1)("type",n.alertService.alert.type)("dismissible",!0)("dismissed",!1)("name","alertBox"),e.xp6(1),e.hij(" ",n.alertService.alert.message," "),e.xp6(1),e.Q6J("dataSource",n.recentTransactionsDataSource)("trackBy",n.trackByFn),e.xp6(22),e.Q6J("matHeaderRowDef",n.recentTransactionsTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.recentTransactionsTableColumns),e.xp6(1),e.Q6J("matFooterRowDef",e.DdM(42,he)))},dependencies:[y.lW,y.RK,v.KE,v.qo,b.Hw,Z.Nt,h.YE,h.nU,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.mD,i.Ke,i.ge,i.ev,i.yh,i.XQ,i.Gk,i.Q2,S.mk,S.O5,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.sg,m.u,J.d,P.W,D.gM],encapsulation:2,data:{animation:G.L},changeDetection:0})}class d{constructor(t){this._cryptoService=t}resolve(t,o){return this._cryptoService.getData()}static#e=this.\u0275fac=function(o){return new(o||d)(e.LFG(l))};static#t=this.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}const fe=[{path:"",component:g,resolve:{data:d}}];var ge=a(6709),Ce=a(1948),ye=a(5804),ve=a(7775),xe=a(1572);class C{static#e=this.\u0275fac=function(o){return new(o||C)};static#t=this.\u0275mod=e.oAB({type:C});static#o=this.\u0275inj=e.cJS({imports:[U.Bz.forChild(fe),y.ot,w.vV,v.lN,b.Ps,Z.c,I.Tx,M.LD,E.SJ,h.JX,i.p0,R.Nh,Y.X,B.m,Q.Cv,J.t,ge.p9,Ce.Fk,ye.J,ve.fC,D.AV,xe.Cq]})}}}]);